id: 31817
name: Jovie-Production
environments:
  production:
    queue-concurrency: 10
    database: Jovie_Production
    storage: 'jovie-production-store'
    memory: 1024
    cli-memory: 512
    runtime: 'php-8.1:al2'
    gateway-version: 2
    build:
      - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install --no-dev'
      - 'php artisan event:cache'
      - 'npm ci && npm run prod && rm -rf node_modules'
    domain:
      - jov.ie
    network: JOVIE-PRIMARY
    timeout: 900

  staging:
    queue-concurrency: 5
    database: jovie-staging-restore
    memory: 1024
    cli-memory: 512
    runtime: 'php-8.1:al2'
    gateway-version: 2
    storage: 'jovie-staging-store'
    domain:
      - staging.jov.ie
    network: JOVIE-PRIMARY
    build:
      - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install --no-dev'
      - 'php artisan event:cache'
      - 'npm ci && npm run prod && rm -rf node_modules'
  dev:
    queue-concurrency: 5
    database: Jovie-Dev
    memory: 1024
    storage: 'jovie-dev-store'
    cli-memory: 512
    runtime: 'php-8.1:al2'
    gateway-version: 2
    timeout: 900
    domain:
      - dev.jov.ie
    network: JOVIE-PRIMARY
    build:
      - 'composer install --no-dev'
      - 'composer update'
      - 'php artisan event:cache'
      - 'rm -rf composer.lock'
      - 'npm ci && npm run prod && rm -rf node_modules'
