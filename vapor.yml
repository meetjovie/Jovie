id: 31817
name: Jovie-Production
asset-domain: assets.jov.ie
environments:
  production:
    queues:
      - prod_default
      - prod_instagram
      - prod_twitch
      - prod_twitter
      - prod_tiktok
    queue-concurrency: 50
    database: jovie-production-db
    storage: 'jovie-production-storage'
    memory: 1024
    cli-memory: 512
    runtime: 'php-8.1:al2'
    gateway-version: 2
    build:
      - 'COMPOSER_MIRROR_PATH_REPOS=1 composer update --no-dev'
      - 'php artisan event:cache'
      - 'npm i && npm run prod && rm -rf node_modules'
    deploy:
      - 'php artisan migrate --force'
    domain:
      - jov.ie
    asset-domain:
      - assets.jov.ie
    network: Jovie
    timeout: 900
  staging:
    queues:
      - stag_default
      - stag_instagram
      - stag_twitch
      - stag_twitter
      - stag_tiktok
    queue-concurrency: 10
    database: jovie-staging-db
    memory: 1024
    cli-memory: 512
    runtime: 'php-8.1:al2'
    gateway-version: 2
    storage: 'jovie-staging-storage'
    domain:
      - staging.jov.ie
    asset-domain:
      - stagingassets.jov.ie
    network: Jovie
    build:
      - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install --no-dev'
      - 'php artisan event:cache'
      - 'npm i && npm run prod && rm -rf node_modules'
    deploy:
      - 'php artisan migrate'
  dev:
    queues:
      - dev_default
      - dev_instagram
      - dev_twitch
      - dev_twitter
      - dev_tiktok
    database: jovie-dev-db
    memory: 1024
    queue-concurrency: 10
    storage: 'jovie-dev-storage'
    cli-memory: 512
    runtime: 'php-8.1:al2'
    gateway-version: 2
    timeout: 900
    domain:
      - dev.jov.ie
    asset-domain:
      - devassets.jov.ie
    network: Jovie
    build:
      - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install --no-dev'
      - 'php artisan event:cache'
      - 'rm -rf composer.lock'
      - 'npm i && npm run prod && rm -rf node_modules'
    deploy:
      - 'php artisan migrate'
